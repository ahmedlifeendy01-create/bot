# ๐ง ุฏููู ุฅุตูุงุญ ูุดููุฉ Google Sheets - Invalid JWT Signature

## โ ุงููุดููุฉ:
ุงูุฎุทุฃ: `invalid_grant: Invalid JWT Signature`

## ๐ ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

### 1๏ธโฃ ููุชุงุญ Service Account ููุชูู ุงูุตูุงุญูุฉ ุฃู ูุญุฐูู
- ููุงุชูุญ Google Service Account ูููู ุฃู ุชูุชูู ุตูุงุญูุชูุง
- ูุฏ ูููู ุงูููุชุงุญ ุชู ุญุฐูู ูู Google Cloud Console

### 2๏ธโฃ Google Sheets API ุบูุฑ ููุนู
- ูุฌุจ ุชูุนูู Google Sheets API ูู ุงููุดุฑูุน

### 3๏ธโฃ Service Account ุบูุฑ ูุดุงุฑู ูู Google Sheet
- ูุฌุจ ูุดุงุฑูุฉ ุงูููู ูุน ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููู Service Account

---

## โ ุงูุญู ุงููุงูู (ุฎุทูุฉ ุจุฎุทูุฉ):

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ููุชุงุญ ุฌุฏูุฏ ุชูุงูุงู

#### ุฃ) ุงูุฐูุงุจ ุฅูู Google Cloud Console
๐ https://console.cloud.google.com/

#### ุจ) ุชูุนูู Google Sheets API
1. ุงุฐูุจ ุฅูู **APIs & Services** โ **Library**
2. ุงุจุญุซ ุนู "**Google Sheets API**"
3. ุฅุฐุง ูู ููู ููุนูุงูุ ุงุถุบุท **Enable**

#### ุฌ) ุฅูุดุงุก/ุชุญุฏูุซ Service Account
1. ุงุฐูุจ ุฅูู **APIs & Services** โ **Credentials**
2. ุฅุฐุง ูุงู `alaa-bot@alaa-soliman-bot.iam.gserviceaccount.com` ููุฌูุฏุงู:
   - ุงุถุบุท ุนููู
   - ุงุฐูุจ ูุชุจููุจ **Keys**
   - ุงุถุบุท **Add Key** โ **Create new key**
   - ุงุฎุชุฑ **JSON**
   - ุงุถุบุท **Create**
   - ุณูุชู ุชุญููู ููู JSON ุฌุฏูุฏ
3. ุฅุฐุง ูู ููู ููุฌูุฏุงู:
   - ุงุถุบุท **Create Credentials** โ **Service Account**
   - ุฃุฏุฎู ุงุณูุงู (ูุซู: `voting-bot-service`)
   - ุฃุนุทู ุฏูุฑ **Editor** ุฃู **Owner**
   - ุฃูุดุฆ ููุชุงุญุงู ุฌุฏูุฏุงู ููุง ูู ุงูุฃุนูู

---

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ GOOGLE_CREDENTIALS ูู Replit

1. ุงูุชุญ ุงูููู JSON ุงูุฐู ุชู ุชุญูููู
2. **ุงูุณุฎ ูู ุงููุญุชูู** (ูู `{` ุฅูู `}`)
3. ูู Replit:
   - ุงูุชุญ **Tools** โ **Secrets**
   - ุงุจุญุซ ุนู `GOOGLE_CREDENTIALS`
   - **ุงุญุฐูู ุชูุงูุงู**
   - ุฃุถูู ูู ุฌุฏูุฏ
   - **ุงูุตู** ูุญุชูู ุงูููู JSON ุงูุฌุฏูุฏ **ูุงููุงู**
   - ุงุญูุธ

โ๏ธ **ุชุญุฐูุฑ ูุงู**: ุชุฃูุฏ ูู ูุณุฎ ุงูููู **ูุงููุงู** ุจุฏูู ุชุนุฏูู ุฃู ุญุฑู!

---

### ุงูุฎุทูุฉ 3: ูุดุงุฑูุฉ Google Sheet ูุน Service Account

1. ุงูุชุญ Google Sheet ุงูุฎุงุต ุจู:
   ๐ https://docs.google.com/spreadsheets/d/1ehztBzZjBe7MTMa3xBwx7Vsix-hoqCCzA89qt2f2NH4/edit

2. ุงุถุบุท ุฒุฑ **Share** (ูุดุงุฑูุฉ)

3. ุฃุถู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูู ุงูููู JSON:
   - ุงุจุญุซ ุนู `"client_email"` ูู ุงูููู
   - ุงูุณุฎ ุงูุจุฑูุฏ (ูุซู: `alaa-bot@alaa-soliman-bot.iam.gserviceaccount.com`)
   - ุงูุตูู ูู ุฎุงูุฉ ุงููุดุงุฑูุฉ

4. ุฃุนุทู ุตูุงุญูุฉ **Editor**

5. ุงุถุบุท **Send** ุฃู **Share**

---

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุจููุฉ Google Sheet

ุชุฃูุฏ ุฃู Google Sheet ูุญุชูู ุนูู ุงูุตูุญุงุช ุงูุชุงููุฉ ุจุงูุฃุณูุงุก ุงูุตุญูุญุฉ:

| ุงุณู ุงูุตูุญุฉ | ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ |
|------------|------------------|
| **Settings** | key \| value |
| **Delegates** | userId \| name \| center \| village \| supervisorId |
| **Supervisors** | userId \| name \| center |
| **Voters** | name \| nationalId \| rollNumber \| center \| village |
| **Votes** | timestamp \| delegateUserId \| voterNationalId \| status \| center \| village |

โ๏ธ **ููู**: ุงูุฃุณูุงุก ูุฌุจ ุฃู ุชููู **ุจุงูุฅูุฌููุฒูุฉ** ู**ูุทุงุจูุฉ ุชูุงูุงู**!

---

### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

ุจุนุฏ ุชุทุจูู ุงูุฎุทูุงุช ุงูุณุงุจูุฉ:
1. ุฃุนุฏ ุชุญููู ุตูุญุฉ Dashboard ูู ุงููุชุตูุญ
2. ุฃู ุดุบูู ุงูุฃูุฑ: `node test-google-auth.js`

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ:

### ุฅุฐุง ูุงู ุงููุดุฑูุน ุฌุฏูุฏุงู:
- ูุฏ ุชุญุชุงุฌ ุฅูู ุชูููู billing ูู Google Cloud (ููู Google Sheets API ูุฌุงูู ุนุงุฏุฉ)

### ุฅุฐุง ุธูุฑุช ุฃุฎุทุงุก ุฃุฎุฑู:
- "Permission denied": ุชุฃูุฏ ูู ูุดุงุฑูุฉ ุงูููู ูุน Service Account
- "Spreadsheet not found": ุชุฃูุฏ ูู ูุนุฑู ุงูุฌุฏูู ุตุญูุญ ูู `GOOGLE_SHEETS_SPREADSHEET_ID`

---

## ๐ฏ ุงูุฎูุงุตุฉ:
ุงููุดููุฉ ุงูุฃุณุงุณูุฉ ูู ุฃู ุงูููุชุงุญ ุงูุญุงูู ูุง ูุนูู. **ุงูุญู ุงูุฃูุถู** ูู:
1. โ ุฅูุดุงุก ููุชุงุญ Service Account **ุฌุฏูุฏ**
2. โ ุชุญุฏูุซ `GOOGLE_CREDENTIALS` ูู Replit Secrets
3. โ ูุดุงุฑูุฉ Google Sheet ูุน Service Account
4. โ ุชูุนูู Google Sheets API

ุจุนุฏ ุฐูู ุณูุนูู ูู ุดูุก ุจุดูู ุตุญูุญ! ๐
